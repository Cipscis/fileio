(()=>{"use strict";var e;function t(t){return t=t??e.Text,new Promise(((r,n)=>{function o(e){const t=this;t.readyState===FileReader.DONE&&(t.result?r(t.result):t.error?n(t.error):n(new DOMException("Error parsing file")))}const a=document.createElement("input");a.type="file",a.addEventListener("change",(function(a){const i=this.files;if(i&&i.length>0){const a=i[0];t===e.File?r(a):function(r){const a=new FileReader;switch(a.addEventListener("load",o),a.addEventListener("error",(()=>{a.abort(),a.error?n(a.error):n(new DOMException("Error parsing file"))})),t){case e.ArrayBuffer:a.readAsArrayBuffer(r);break;case e.BinaryString:a.readAsBinaryString(r);break;case e.DataUrl:a.readAsDataURL(r);break;case e.Text:a.readAsText(r);break;default:n(new RangeError(`FileIO: Unrecognised readMethod ${t}`))}}(a)}})),a.click()}))}function r(e,t){let r;return r=void 0===e?"":"string"!=typeof e?""+e:e,(t?.sanitise??!1)&&r.match(/^[=\-+@]/)&&(r="\t"+e),r.match(/,|"|\n/)&&(r=r.replace(/"/g,'""'),r='"'+r+'"'),r}let n;function o(e,t){e instanceof File?function(e,t){if(!(e instanceof File))throw new TypeError("FileIO: save file requires a File");const r=t?.filename||e.name||"file";if(navigator.msSaveBlob)navigator.msSaveBlob(e,r);else{const t=new FileReader;t.addEventListener("load",(function(){if(t.readyState===FileReader.DONE){if(!t.result)throw t.error?t.error:new DOMException("Error parsing file");i(t.result,r)}})),t.addEventListener("error",(()=>{throw t.abort(),t.error?t.error:new DOMException("Error parsing file")})),t.readAsDataURL(e)}}(e,t):e instanceof Blob?a(e,t):function(e,t){let n=t?.filename||"file",o=t?.type||"text/plain";switch(o){case"json":o="application/json";break;case"csv":o="text/csv"}"application/json"===o?(e=JSON.stringify(e),n=s(n,"json")):"text/csv"===o&&("string"!=typeof e&&(e=function(e,t){return(t=t||{}).transpose=t.transpose||!1,t.sanitise=t.sanitise||!1,function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].join(","));return t.join("\n")}(function(e,t){for(const n of e)for(let e=0;e<n.length;e++)n[e]=r(n[e],t);return e}(function(e,t){const r=t?.transpose??!1,n=e.reduce(((e,t)=>Math.max(e,t.length)),0),o=r?n:e.length,a=r?e.length:n,i=[];for(let t=0;t<o;t++){const n=[];for(let o=0;o<a;o++){const a=r?o:t,i=r?t:o;let s=e[a][i];i>=e[a].length&&(s=""),n.push(s)}i.push(n)}return i}(e,t),t))}(e,t)),n=s(n,"csv")),a(new Blob([e],{type:o}),t)}(e,t)}function a(e,t){if(!(e instanceof Blob))throw new TypeError("FileIO: save blob requires a Blob");const r=t?.filename||"file";navigator.msSaveBlob?navigator.msSaveBlob(e,r):i(URL.createObjectURL(e),r)}function i(e,t){n=n||document.createElement("a"),n.href=e,n.download=t,n.click(),URL.revokeObjectURL(e)}function s(e,t){return new RegExp("\\."+t+"$").test(e)||(e+="."+t),e}!function(e){e.ArrayBuffer="arrayBuffer",e.BinaryString="binaryString",e.DataUrl="dataUrl",e.Text="text",e.File="file"}(e||(e={}));const c=e=>{document.querySelectorAll(".js-fileio-image").forEach((t=>t.src=e))};document.querySelectorAll(".js-load-image").forEach((r=>r.addEventListener("click",(()=>{t(e.DataUrl).then(c)}))));const l=()=>{o("Hey look, the file has some content!",{filename:"test file.txt",type:"text/plain"})};document.querySelectorAll(".js-save-data").forEach((e=>e.addEventListener("click",l)));const f=()=>{o({text:1,foo:"bar"},{filename:"test json",type:"json"})};document.querySelectorAll(".js-save-json").forEach((e=>e.addEventListener("click",f)));const u=()=>{o([["even numbers",0,2,4,6,8,10,12,14,16,18,20,22,24],["odd numbers",1,3,5,7,9],["prime numbers, up to ten",2,3,5,7]],{filename:"test csv",type:"csv",transpose:!0})};document.querySelectorAll(".js-save-csv").forEach((e=>e.addEventListener("click",u)));const d=async()=>{o(await t(e.File))};document.querySelectorAll(".js-save-file").forEach((e=>e.addEventListener("click",d)))})();
//# sourceMappingURL=docs-script.bundle.js.map